{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Search Enzyme Model</title>
    <!-- Bootstrap Core CSS -->
    <link href="{% static 'asset/css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- Font Awesome CSS -->
    <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet">
    <!-- Animate CSS -->
    <link href="{% static 'css/animate.css' %}" rel="stylesheet">
    <!-- Owl-Carousel -->
    <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.transitions.css' %}">
    <!-- Custom CSS -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="{% static 'css/responsive.css' %}" rel="stylesheet">
    <!-- Colors CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/color/green.css' %}">
    <!-- Colors CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/color/green.css' %}" title="green">
    <link rel="stylesheet" type="text/css" href="{% static 'css/color/light-red.css' %}" title="light-red">
    <link rel="stylesheet" type="text/css" href="{% static 'css/color/blue.css' %}" title="blue">
    <link rel="stylesheet" type="text/css" href="{% static 'css/color/light-blue.css' %}" title="light-blue">
    <link rel="stylesheet" type="text/css" href="{% static 'css/color/yellow.css' %}" title="yellow">
    <link rel="stylesheet" type="text/css" href="{% static 'css/color/light-green.css' %}" title="light-green">
    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <!-- Modernizer js -->
    <script src="{% static 'js/modernizr.custom.js' %}"></script>
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <script src="https://3dmol.csb.pitt.edu/build/3Dmol-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/3Dmol/2.4.2/3Dmol-min.js"></script>
    <![endif]-->

    <style>
        .page-scroll {
            font-size: 18px;
        }

        .navbar-default .nav li a {
            font-size: 14px !important;
        }

        #page-top {
            position: relative;
            height: 100vh;
            background-image: url('../../static/img/enzyme5.jpg');
            /* è®¾ç½®èƒŒæ™¯å›¾ç‰‡ */
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            padding: 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 1;
        }

        #page-top .carousel-inner {
            position: relative;
            z-index: 10001;
        }

        #page-top .carousel-item {
            height: 100vh;
            /* ä¿è¯æ¯ä¸ªè½®æ’­é¡¹çš„é«˜åº¦ä¸ºè§†å£é«˜åº¦ */
        }

        #page-top .carousel-item img {
            object-fit: cover;
            /* ç¡®ä¿å›¾ç‰‡å¡«å……å¹¶ä¿æŒæ¯”ä¾‹ */
            height: 100%;
            /* å¼ºåˆ¶å›¾ç‰‡å æ»¡è½®æ’­é¡¹çš„é«˜åº¦ */
            width: 100%;
        }

        .search-container {
            text-align: center;
            background-color: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .function-container {
            display: flex;
            align-items: center;
            gap: 10px;
            /* æ·»åŠ é—´è· */
            margin-top: 10px;
        }

        .search-box {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-color: rgba(255, 255, 255, 0);
            padding: 10px;
            border-radius: 30px;
            width: 500px;
            opacity: 0;
            /* åˆå§‹çŠ¶æ€éšè— */
            transform: translateY(20px);
            /* å‘ä¸‹åç§»ï¼Œå¢åŠ åŠ¨ç”»æ•ˆæœ */
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        .search-box input {
            width: 60%;
            padding: 12px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            outline: none;
        }

        .search-box button {
            background-color: #51b4ff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.3s;
        }

        .search-box button:hover {
            background-color: #1f8eff;
        }

        .search-container h1 {
            font-size: 30px;
            margin-bottom: 20px;
        }
        .result {
            background: linear-gradient(135deg, #e2ebff, #b0c7ff); /* æ¸å˜èƒŒæ™¯è‰² */
            padding: 20px;
            border-radius: 12px; /* å¢åŠ åœ†è§’ */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1), 0 4px 16px rgba(0, 0, 0, 0.15); /* æ›´å¼ºçƒˆçš„é˜´å½±æ•ˆæœ */
            transition: all 0.3s ease; /* å¢åŠ è¿‡æ¸¡æ•ˆæœ */
        }

        .result-container h1 {
            font-size: 30px;
            margin-bottom: 20px;
        }

        .centered-title {
            text-align: center;
            font-size: 26px;
            font-weight: bold;
            color: #333;
            margin-bottom: 16px;
            padding-bottom: 8px;
            position: relative;
            display: inline-block;
            border-bottom: 2px solid #0b7ec4;
            /* æ·»åŠ åº•éƒ¨è¾¹æ¡† */
        }


        /* è¡¨æ ¼å®¹å™¨çš„å†…è¾¹è· */
        .result-title {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: auto;
        }

        .dropdown-menu li a {
            color: black !important;
        }

        .dropdown-menu li a:hover {
            color: #7ad6ff !important;
        }

        #loadingMessage {
            text-align: center;
            display: none;
            font-size: 18px;
        }


        /* ç¾åŒ–ä¸Šä¼ æŒ‰é’® */
        #pdbFileInput {
            display: block;
            margin: 20px auto;
            padding: 10px 15px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            background-color: #4a90e2;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #pdbFileInput:hover {
            background-color: #357ABD;
        }

        #3dmolviewer_1741848665239376 {
            margin-top: 40px;
        }

        .viewer-card {
            position: relative;
            width: 640px;
            height: 480px;
            background: #e2dae3;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: box-shadow 0.3s ease, transform 0.2s ease;
            margin-top: 10px;
        }

        /* æ‚¬åœæ—¶å¢åŠ é˜´å½±ï¼Œæå‡å±‚æ¬¡æ„Ÿ */
        .viewer-card:hover {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            transform: translateY(-3px);
        }

        /* éšè—åŸç”Ÿæ–‡ä»¶ä¸Šä¼ æŒ‰é’® */
        #pdbFileInput {
            display: none;
        }

        /* è‡ªå®šä¹‰ä¸Šä¼ æŒ‰é’® */
        .custom-file-upload {
            background-color: #51b4ff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        /* é¼ æ ‡æ‚¬åœæ—¶å˜æ·±è‰² */
        .custom-file-upload:hover {
            background-color: #357ABD;
        }

        /* Viewer container to unify 3D model and protein info */
        .viewer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            /* Reduced gap between viewer and info */
            padding: 20px;
            background: #f8f9fd;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            margin: 0 30px 40px 30px;
        }

        /* 3D Viewer card */
        .viewer-card {
            position: relative;
            width: 1280px;
            height: 540px;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: box-shadow 0.3s ease;
        }

        .viewer-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Protein info card */
        .protein-info-card {
            width: 1280px;
            /* Match the width of the viewer */
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            transition: box-shadow 0.3s ease;
        }

        .protein-info-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .protein-info-card h2 {
            font-size: 22px;
            color: #333;
            margin-bottom: 10px;
        }

        #proteinDetails {
            font-size: 16px;
            color: #555;
        }

        #proteinDetails h3::before,
        #proteinDetails p strong::before {
            margin-right: 5px;
        }

        .section-title {
            margin-bottom: 30px;
        }

        .content-section {
            /*padding: 50px 0;*/
        }

        .content-box {
            background: #ffffff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .carousel img {
            border-radius: 10px;
            width: 100%;
            height: auto;
            object-fit: cover;
        }

        h3 {
            color: #333;
            font-size: 22px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        p {
            font-size: 16px;
            line-height: 1.8;
        }

        strong {
            color: #333333;
        }
        /*
    .protein-info-card {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 10px;
    }
*/
    .protein-info-column {
        flex: 1;
        min-width: 18%; /* Ensures columns are flexible but don't shrink too much */
        padding: 10px;
        box-sizing: border-box;
    }

    .protein-info-column:not(:last-child) {
        border-right: 1px solid #dcdcdc; /* æ·¡ç°è‰²åˆ†å‰²çº¿ */
    }

    .protein-info-column h3 {
        margin-top: 0;
    }

    .protein-info-column p {
        margin: 5px 0;
    }
    </style>


</head>


<body class="index">

    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">Enzyme</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="{% url 'page1' %}">é¦–é¡µ </a>
                    </li>
                    <li><a class="page-scroll" href="{% url 'importdatabase' %}">å¯¼å…¥è›‹ç™½è´¨æ•°æ®</a></li>
                    <li><a class="page-scroll" href="{% url 'page2' %}">è¡¨å¾æ¨¡å‹</a></li>
                    <li><a class="page-scroll" href="{% url 'similarenzyme' %}">é…¶æŒ–æ˜</a></li>
                    <li><a class="page-scroll" href="{% url 'dataanalysis' %}">è›‹ç™½è´¨ä¿¡æ¯å¯è§†åŒ–</a></li>
                    <li><a class="page-scroll" href="{% url 'enzymemodel' %}">è›‹ç™½è´¨3Dæ¨¡å‹</a></li>
                    <li><a class="page-scroll" href="{% url 'about' %}">è›‹ç™½è´¨æ•°æ®åº“</a></li>


                    <li>
                        <a href="http://127.0.0.1:8000/admin_ls/" style="margin-left: 30px;">ç®¡ç†å‘˜ç™»å½•</a>
                    </li>
                </ul>

            </div>
        </div>
    </nav>


    <section id="page-top">
        <div id="main-slide" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="item active">
                    <div class="slider-content">
                        <div class="col-md-12 text-center"
                            style="display: flex; flex-direction: column; align-items: center;">
                            <h1 class="animated3">
                                <span>æœç´¢<strong>è›‹ç™½è´¨3Dæ¨¡å‹</strong></span>
                            </h1>
                            <p class="animated2">è¾“å…¥è›‹ç™½è´¨çš„æ¨¡å‹ç¼–å·ï¼Œæˆ‘ä»¬å°†ä¼šæä¾›æ‚¨é…¶çš„3Dæ¨¡å‹</p>
                            <div class="function-container">
                                <div class="search-box">
                                    <input type="text" id="search-input" placeholder="è¯·è¾“å…¥è›‹ç™½è´¨æ¨¡å‹ç¼–å·..."












                                           
                                        style="color: black;">

                                    <button id="search-button" style="margin-left: 15px;display: none">æœç´¢</button>

                                    <button id="download-button" style="margin-left: 15px;">ä¸‹è½½</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--
<section id="result" class="result" style="height: auto;background-color: #e2ebff;">
    <div class="result-container">
        <div class="result-title">
            <h1 class="centered-title">3Dæ¨¡å‹å¯è§†åŒ–</h1>
            <div id="loadingMessage">æ­£åœ¨åŠ è½½...</div>
            <label for="pdbFileInput" class="custom-file-upload">è¯·é€‰æ‹©ä¸Šä¼ æ–‡ä»¶ï¼ˆ.pdbï¼‰</label>
            <input type="file" id="pdbFileInput" accept=".pdb">
        </div>
        <div class="row" style="display: flex;justify-content: space-between;align-items: flex-start;">
            <div class="col-md-6" style="margin: 10px 30px 40px 40px;">
                <div id="3dmolviewer_1741848665239376" class="viewer-card"
                     style="position: relative; width: 640px; height: 480px;">
                </div>
            </div>
            <div class="col-md-6 protein-info">
                <h2>è›‹ç™½è´¨ä¿¡æ¯</h2>
                <div id="proteinDetails">è¯·è¾“å…¥ PDB ç¼–å·å¹¶æœç´¢</div>
            </div>
        </div>
    </div>
</section>
-->

    <section id="result" class="result"
        style="height: auto; background-image: url('images/parallax/bg-01.jpg'); padding-bottom: 20px;">
        <div class="result-container" style="height: auto;">
            <div class="result-title">
                <h1 class="centered-title" style="">3Dæ¨¡å‹å¯è§†åŒ–</h1>
                <div id="loadingMessage">æ­£åœ¨åŠ è½½...</div>
                <label for="pdbFileInput" class="custom-file-upload">è¯·é€‰æ‹©ä¸Šä¼ æ–‡ä»¶ï¼ˆ.pdbï¼‰</label>
                <input type="file" id="pdbFileInput" accept=".pdb">
            </div>
            <div class="viewer-container">
                <div class="viewer-card" id="3dmolviewer_1741848665239376"></div>
                <div class="protein-info-card">

                    <div id="proteinDetails">è¯·è¾“å…¥ PDB ç¼–å·å¹¶æœç´¢</div>
                </div>
            </div>
        </div>
    </section>

    <div id="introduction" class="content-section">
        <div class="container">
            <div class="section-title text-center">
                <h3 style="font-size: 26px; font-weight: bold; color: #333;
                               text-transform: uppercase; border-bottom: 2px solid #007bff;
                               display: inline-block; padding-bottom: 10px;">
                    åŠŸèƒ½ä»‹ç»
                </h3>
            </div>

            <div class="row align-items-center mb-5">
                <div class="col-md-6">
                    <div class="content-box">
                        <h3>è›‹ç™½è´¨çš„3Dæ¨¡å‹çš„ç»„æˆä¿¡æ¯</h3>
                        <p style="font-size: 14px;text-align: justify;">
                        è›‹ç™½è´¨çš„ä¸‰ç»´ç»“æ„æ¨¡å‹ä¸»è¦åŸºäº X
                        å°„çº¿æ™¶ä½“å­¦ã€å†·å†»ç”µå­æ˜¾å¾®é•œæˆ–æ ¸ç£å…±æŒ¯ç­‰å®éªŒæ•°æ®ç”Ÿæˆï¼Œæˆ–ç”± AI é¢„æµ‹
                        <br><strong>1.åŸå­åæ ‡: </strong>3Dæ¨¡å‹è®°å½•äº†è›‹ç™½è´¨æ¯ä¸ªåŸå­çš„ç©ºé—´åæ ‡ï¼ˆx,
                        y, zï¼‰ï¼Œå®šä¹‰äº†è›‹ç™½è´¨çš„ç»“æ„ï¼ŒåŒ…æ‹¬ä¸»é“¾ï¼ˆéª¨æ¶ï¼‰å’Œä¾§é“¾çš„ç²¾ç¡®æ’å¸ƒã€‚
                        <br><strong>2.äºŒçº§ç»“æ„:</strong>
                        Î±-èºæ—‹ï¼šèºæ—‹çŠ¶ç»“æ„ï¼Œç”±æ°¢é”®ç¨³å®šã€‚
                        Î²-æŠ˜å ï¼šç‰‡å±‚ç»“æ„ï¼Œç”±å¹³è¡Œæˆ–åå¹³è¡Œçš„ Î² é“¾ç»„æˆã€‚
                        æ— è§„å·æ›²ï¼šæ— å›ºå®šå½¢æ€çš„åŒºåŸŸï¼Œé€šå¸¸ç”¨äºè¿æ¥äºŒçº§ç»“æ„ã€‚
                        <br><strong>3.ä¸‰çº§ç»“æ„:</strong>
                        è›‹ç™½è´¨åœ¨3Dç©ºé—´ä¸­çš„å®Œæ•´æŠ˜å çŠ¶æ€ï¼Œç”±æ°¢é”®ã€ç–æ°´ä½œç”¨ã€ç¦»å­é”®ã€èŒƒå¾·ååŠ›ç­‰ç¨³å®šã€‚
                        <br><strong>4.å››çº§ç»“æ„:</strong>
                        ç”±å¤šä¸ªè›‹ç™½è´¨äºšåŸºç»„æˆçš„å¤åˆä½“ï¼Œå¦‚è¡€çº¢è›‹ç™½ç”±å››ä¸ªäºšåŸºç»„æˆã€‚
                        <br><strong>5.æ´»æ€§ä½ç‚¹: </strong>åŒ…å«å‚¬åŒ–ä½œç”¨æˆ–åˆ†å­ç»“åˆçš„å…³é”®æ°¨åŸºé…¸
                        <br><strong>6.é…ä½“ã€è¾…å› å­ã€é‡‘å±ç¦»å­:</strong>
                        é…ä½“ï¼šæŒ‡èƒ½ä¸è›‹ç™½è´¨ç»“åˆçš„å°åˆ†å­ï¼Œå¦‚ ATPã€æŠ‘åˆ¶å‰‚æˆ–åº•ç‰©ã€‚
                        è¾…å› å­ï¼šå¦‚é‡‘å±ç¦»å­æˆ–è¾…é…¶ï¼Œè¿™äº›åˆ†å­å¯¹è›‹ç™½è´¨åŠŸèƒ½è‡³å…³é‡è¦ã€‚
                        <br><strong>7.åŠ¨æ€ä¿¡æ¯: </strong>é€šè¿‡åˆ†å­åŠ¨åŠ›å­¦æ¨¡æ‹Ÿå¯è§‚å¯Ÿè›‹ç™½è´¨åœ¨ä¸åŒç¯å¢ƒä¸‹çš„è¿åŠ¨
                    </p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="carousel-container">
                        <div id="carousel-sequence" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active" style="margin-top: 15px;">
                                    <img src="../../static/img/enzyme9.png" alt="è›‹ç™½è´¨åºåˆ—">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row align-items-center" style="margin-top: 20px;">
                <div class="col-md-6">
                    <div class="carousel-container">
                        <div id="carousel-model" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active" style="margin-top: 50px;">
                                    <img src="../../static/img/enzyme19.png" alt="è¡¨å¾æ¨¡å‹">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="content-box" style="margin-top: 40px;">
                        <h3>è›‹ç™½è´¨3Dæ¨¡å‹çš„ä½œç”¨</h3>
                        <p style="font-size: 14px;text-align: justify;">
                        <strong>1.ç»“æ„ä¸åŠŸèƒ½ç ”ç©¶: </strong>é€šè¿‡è›‹ç™½è´¨çš„3Dæ¨¡å‹ï¼Œç ”ç©¶äººå‘˜å¯ä»¥è§£æå…¶åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š
                        é…¶çš„å‚¬åŒ–æœºåˆ¶ï¼šç ”ç©¶é…¶å¦‚ä½•é™ä½åŒ–å­¦ååº”çš„æ´»åŒ–èƒ½ã€‚
                        è›‹ç™½è´¨-è›‹ç™½è´¨ç›¸äº’ä½œç”¨ï¼šç ”ç©¶ç»†èƒä¿¡å·ä¼ å¯¼è·¯å¾„ï¼Œå¦‚ G è›‹ç™½å¶è”å—ä½“å¦‚ä½•ä¼ é€’ä¿¡å·ã€‚
                        <br><strong>2.è¯ç‰©è®¾è®¡ä¸ç ”å‘: </strong>ç»“æ„ç”Ÿç‰©å­¦æ˜¯
                        è®¡ç®—æœºè¾…åŠ©è¯ç‰©è®¾è®¡çš„æ ¸å¿ƒï¼š
                        åˆ†å­å¯¹æ¥ï¼šæ¨¡æ‹Ÿå°åˆ†å­è¯ç‰©å¦‚ä½•ä¸é¶æ ‡è›‹ç™½ç»“åˆï¼Œæé«˜è¯ç‰©è®¾è®¡æ•ˆç‡ã€‚
                        ç†æ€§è¯ç‰©è®¾è®¡ï¼šä¼˜åŒ–è¯ç‰©åˆ†å­ï¼Œä½¿å…¶æ›´é«˜æ•ˆã€æ›´ä¸“ä¸€åœ°ä½œç”¨äºé¶è›‹ç™½ã€‚
                        <br><strong>3.ç–¾ç—…ç ”ç©¶:</strong>
                        è®¸å¤šç–¾ç—…ï¼ˆå¦‚é˜¿å°”èŒ¨æµ·é»˜ç—…ã€å¸•é‡‘æ£®ç—…ï¼‰ä¸è›‹ç™½è´¨å¼‚å¸¸æŠ˜å æœ‰å…³ã€‚3Dæ¨¡å‹å¯ç”¨äºç ”ç©¶ï¼š
                        è›‹ç™½é”™è¯¯æŠ˜å ï¼ˆå¦‚Î²æ·€ç²‰æ ·è›‹ç™½åœ¨é˜¿å°”èŒ¨æµ·é»˜ç—…ä¸­çš„èšé›†ï¼‰ã€‚
                        é—ä¼ çªå˜çš„å½±å“ï¼ˆå¦‚ CFTR çªå˜å¯¼è‡´å›Šæ€§çº¤ç»´åŒ–ï¼‰ã€‚
                        <br><strong>4.åˆæˆç”Ÿç‰©å­¦ä¸è›‹ç™½è´¨å·¥ç¨‹:</strong>
                        3Dç»“æ„å¯ç”¨äºè®¾è®¡äººå·¥è›‹ç™½è´¨ï¼Œå¦‚ï¼š
                        é…¶å·¥ç¨‹ï¼šæ”¹é€ é…¶ç»“æ„ä»¥æé«˜å‚¬åŒ–æ•ˆç‡æˆ–æ”¹å˜åº•ç‰©ç‰¹å¼‚æ€§ã€‚
                        è›‹ç™½è´¨çº³ç±³æŠ€æœ¯ï¼šè®¾è®¡æ–°çš„è›‹ç™½è´¨ææ–™æˆ–è¯ç‰©è½½ä½“ã€‚
                    </p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <section id="examples" class="latest-news-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="section-title text-center">
                        <h3 style="font-size: 26px; font-weight: bold; color: #333;
                               text-transform: uppercase; border-bottom: 2px solid #007bff;
                               display: inline-block; padding-bottom: 10px;">æœç´¢ç¤ºä¾‹</h3>
                        <p>æˆ‘ä»¬æä¾›ä¸€äº›å…¸å‹çš„æœç´¢ç»“æœï¼Œä»¥ä¾¿æ‚¨å¿«é€Ÿå­¦ä¹ å¦‚ä½•ä½¿ç”¨åŠŸèƒ½</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="latest-news">
                    <div class="col-md-12">
                        <div class="latest-post">
                            <img src="{% static 'img/step4.1.png' %}" class="img-responsive" alt="">
                            <div class="post-details">
                                <span class="date">1</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="latest-post">
                            <img src="{% static 'img/step4.2.png' %}" class="img-responsive" alt="">
                            <div class="post-details">
                                <span class="date">2</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="latest-post">
                            <img src="{% static 'img/step4.3.png' %}" class="img-responsive" alt="">
                            <div class="post-details">
                                <span class="date">3</span>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- jQuery Version 2.1.1 -->
    <script src="{% static 'js/jquery-2.1.1.min.js' %}"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="{% static 'asset/js/bootstrap.min.js' %}"></script>

    <!-- Plugin JavaScript -->
    <script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
    <script src="{% static 'js/classie.js' %}"></script>
    <script src="{% static 'js/count-to.js' %}"></script>
    <script src="{% static 'js/jquery.appear.js' %}"></script>
    <script src="{% static 'js/cbpAnimatedHeader.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/jquery.fitvids.js' %}"></script>
    <script src="{% static 'js/styleswitcher.js' %}"></script>

    <!-- Contact Form JavaScript -->
    <script src="{% static 'js/jqBootstrapValidation.js' %}"></script>
    <script src="{% static 'js/contact_me.js' %}"></script>

    <!-- Custom Theme JavaScript -->
    <script src="{% static 'js/script.js' %}"></script>
    <!--
<script>
    document.getElementById('search-button').addEventListener('click', function() {
        let proteinId = document.getElementById('search-input').value.trim();
        if (!proteinId) {
            alert("è¯·è¾“å…¥è›‹ç™½è´¨ç¼–å·ï¼");
            return;
        }

        let loadingMessage = document.getElementById('loadingMessage');
        loadingMessage.style.display = "block"; // æ˜¾ç¤ºåŠ è½½ä¿¡æ¯

        // å‡è®¾åç«¯ API æ˜¯ /api/getProteinModel?proteinId=XXX
        fetch(`/api/getProteinModel?proteinId=${proteinId}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error("ç½‘ç»œé”™è¯¯æˆ–æ•°æ®æœªæ‰¾åˆ°");
                }
                return response.text(); // æœåŠ¡å™¨è¿”å›çš„æ˜¯ PDB æ ¼å¼çš„æ–‡æœ¬æ•°æ®
            })
            .then(pdbData => {
                loadingMessage.style.display = "none"; // éšè—åŠ è½½ä¿¡æ¯
                renderProteinModel(pdbData);
            })
            .catch(error => {
                loadingMessage.style.display = "none";
                alert("è·å–æ•°æ®å¤±è´¥: " + error.message);
            });
    });

    function renderProteinModel(pdbData) {
        let viewerElement = document.getElementById("viewer");
        viewerElement.innerHTML = ""; // æ¸…ç©ºä¹‹å‰çš„å†…å®¹

        let viewer = $3Dmol.createViewer(viewerElement, {
            defaultcolors: $3Dmol.rasmolElementColors
        });

        viewer.addModel(pdbData, "pdb"); // åŠ è½½ PDB æ•°æ®
        viewer.setStyle({}, { cartoon: { color: 'spectrum' } }); // è®¾å®šæ˜¾ç¤ºæ ·å¼
        viewer.zoomTo(); // è‡ªåŠ¨è°ƒæ•´è§†è§’
        viewer.render(); // æ¸²æŸ“æ¨¡å‹
    }
</script>
-->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                let searchBox = document.querySelector(".search-box");
                searchBox.style.opacity = "1";
                searchBox.style.transform = "translateY(0)"; // å¤ä½åŠ¨ç”»
            }, 500); // 500ms åæ‰§è¡ŒåŠ¨ç”»
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                let searchBox = document.querySelector(".custom-file-upload");
                searchBox.style.opacity = "1";
                searchBox.style.transform = "translateY(0)"; // å¤ä½åŠ¨ç”»
            }, 500); // 500ms åæ‰§è¡ŒåŠ¨ç”»
        });
    </script>
    <script>
        document.getElementById("download-button").addEventListener("click", function () {
            let proteinId = document.getElementById("search-input").value.trim();
            if (proteinId === "") {
                alert("è¯·è¾“å…¥è›‹ç™½è´¨çš„PDBç¼–å·ï¼");
                return;
            }

            // PDB æ–‡ä»¶çš„ä¸‹è½½åœ°å€ (RCSB PDB)
            let pdbUrl = `https://files.rcsb.org/download/${proteinId}.pdb`;

            // åˆ›å»ºéšè—çš„ a æ ‡ç­¾å¹¶è‡ªåŠ¨è§¦å‘ä¸‹è½½
            let a = document.createElement("a");
            a.href = pdbUrl;
            a.download = `${proteinId}.pdb`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });
    </script>

    <script>
        document.getElementById("search-button").addEventListener("click", function () {
            let input = document.getElementById("search-input").value.trim().toUpperCase();
            if (input === "") {
                alert("è¯·è¾“å…¥è›‹ç™½è´¨çš„ PDB ç¼–å·");
                return;
            }

            let pdbId = input; // Assuming input is a PDB ID like "1O86"
            let pdbUrl = `https://files.rcsb.org/download/${pdbId}.pdb`;
            let viewerDiv = document.getElementById("3dmolviewer_1741848665239376");
            viewerDiv.innerHTML = ""; // Clear previous 3D view
            let loadingMessage = document.getElementById("loadingMessage");
            let proteinDetails = document.getElementById("proteinDetails");

            loadingMessage.style.display = "block"; // Show loading message
            proteinDetails.innerHTML = "æ­£åœ¨è·å–è›‹ç™½è´¨ä¿¡æ¯..."; // Show loading info

            // Initialize 3Dmol viewer
            let viewer = $3Dmol.createViewer(viewerDiv, { backgroundColor: "white" });

            // Load PDB 3D structure
            viewer.addModelFromURL(pdbUrl, "pdb", function () {
                viewer.setStyle({}, { cartoon: { color: "spectrum" } });
                viewer.zoomTo();
                viewer.render();
                loadingMessage.style.display = "none"; // Hide loading message
            }, function (error) {
                alert("åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ PDB ç¼–å·æ˜¯å¦æ­£ç¡®ï¼");
                loadingMessage.style.display = "none";
                proteinDetails.innerHTML = "æœªæ‰¾åˆ°è›‹ç™½è´¨ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥ PDB ç¼–å·æ˜¯å¦æ­£ç¡®ï¼";
            });

            // Simulate backend data retrieval based on PDB ID
            fetchProteinInfo(pdbId, proteinDetails);
        });

        // Function to fetch protein info from backend API
        function fetchProteinInfo(pdbId, proteinDetails) {
            const apiUrl = `https://your-backend.com/api/protein/${pdbId}`; // Replace with your actual API endpoint

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("API request failed");
                    }
                    return response.json();
                })
                .then(data => {
                    // Format the protein info based on the API response
                    let infoHtml = `
                    <div class="protein-info-column">
                        <h3>ğŸ“Œ åŸºæœ¬ä¿¡æ¯</h3>
                        <p><strong>ğŸ“Œ PDB ID:</strong> ${data.basicInfo.pdbId || "N/A"}</p>
                        <p><strong>ğŸ”„ UniProt ID:</strong> ${data.basicInfo.uniProtId || "N/A"}</p>
                        <p><strong>ğŸ”¬ åˆ†å­ç±»å‹:</strong> ${data.basicInfo.moleculeType || "N/A"}</p>
                        <p><strong>é“¾ä¿¡æ¯:</strong> ${data.basicInfo.chain || "N/A"}</p>
                    </div>
                    <div class="protein-info-column">
                        <h3>ğŸ“Š ç»“æ„å‚æ•°</h3>
                        <p><strong>ğŸ“Š æ®‹åŸºæ•°é‡:</strong> ${data.structureParams.residueCount || "N/A"}</p>
                        <p><strong>åˆ†å­é‡:</strong> ${data.structureParams.molecularWeight || "N/A"}</p>
                    </div>
                    <div class="protein-info-column">
                        <h3>ğŸ§¬ è›‹ç™½è´¨ä¿¡æ¯</h3>
                        <p><strong>ğŸ§¬ åç§°:</strong> ${data.proteinInfo.name || "N/A"}</p>
                        <p><strong>åŸºå› :</strong> ${data.proteinInfo.gene || "N/A"}</p>
                    </div>
                    <div class="protein-info-column">
                        <h3>ğŸŒ± æ¥æºä¸åˆ¶å¤‡</h3>
                        <p><strong>ğŸŒ± ç‰©ç§:</strong> ${data.sourcePreparation.species || "N/A"}</p>
                        <p><strong>è¡¨è¾¾ç³»ç»Ÿ:</strong> ${data.sourcePreparation.expressionSystem || "N/A"}</p>
                        <p><strong>åˆ¶å¤‡æ–¹å¼:</strong> ${data.sourcePreparation.preparationMethod || "N/A"}</p>
                    </div>
                    <div class="protein-info-column">
                        <h3>ğŸ”„ åºåˆ—ä¿¡æ¯</h3>
                        <p><strong>ğŸ”„ åºåˆ—åŒºé—´:</strong> ${data.sequenceInfo.range || "N/A"}</p>
                        <p><strong>å®Œæ•´åºåˆ—ï¼ˆå‰20å­—ç¬¦ï¼‰:</strong> ${data.sequenceInfo.sequencePreview || "N/A"}</p>
                    </div>
                `;
                    proteinDetails.innerHTML = infoHtml;
                })
                .catch(error => {
                    console.error("Error fetching protein info:", error);
                    proteinDetails.innerHTML = "æœªæ‰¾åˆ°è›‹ç™½è´¨ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥ PDB ç¼–å·æ˜¯å¦æ­£ç¡®æˆ–è”ç³»ç®¡ç†å‘˜ï¼";
                });
        }
    </script>

    <script>
        var loadScriptAsync = function (uri) {
            return new Promise((resolve, reject) => {
                var savedexports, savedmodule;
                if (typeof exports !== 'undefined') savedexports = exports;
                else exports = {};
                if (typeof module !== 'undefined') savedmodule = module;
                else module = {};

                var tag = document.createElement('script');
                tag.src = uri;
                tag.async = true;
                tag.onload = () => {
                    exports = savedexports;
                    module = savedmodule;
                    resolve();
                };
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            });
        };

        if (typeof $3Dmolpromise === 'undefined') {
            $3Dmolpromise = loadScriptAsync('https://cdnjs.cloudflare.com/ajax/libs/3Dmol/2.4.2/3Dmol-min.js');
        }

        $3Dmolpromise.then(function () {
            var viewer = $3Dmol.createViewer(document.getElementById("3dmolviewer_1741848665239376"), { backgroundColor: "white" });
            var tooltip = document.createElement("div");
            tooltip.style.position = "absolute";
            tooltip.style.display = "none";
            tooltip.style.background = "rgba(0,0,0,0.8)";
            tooltip.style.color = "white";
            tooltip.style.padding = "8px";
            tooltip.style.borderRadius = "5px";
            tooltip.style.fontSize = "14px";
            tooltip.style.pointerEvents = "none";
            tooltip.style.zIndex = "1000";
            document.body.appendChild(tooltip);

            var loadingMessage = document.getElementById("loadingMessage");
            var proteinDetails = document.getElementById("proteinDetails");

            // Search button functionality
            document.getElementById("search-button").addEventListener("click", function () {
                let input = document.getElementById("search-input").value.trim().toUpperCase();
                if (input === "") {
                    alert("è¯·è¾“å…¥è›‹ç™½è´¨çš„ PDB ç¼–å·");
                    return;
                }

                let pdbId = input;
                let pdbUrl = `https://files.rcsb.org/download/${pdbId}.pdb`;
                viewer.clear();
                loadingMessage.style.display = "block";
                proteinDetails.innerHTML = "æ­£åœ¨è·å–è›‹ç™½è´¨ä¿¡æ¯...";

                viewer.addModelFromURL(pdbUrl, "pdb", function () {
                    viewer.setStyle({}, { cartoon: { color: "spectrum" } });
                    viewer.zoomTo();
                    viewer.render();
                    loadingMessage.style.display = "none";
                }, function (error) {
                    alert("åŠ è½½ 3D æ¨¡å‹å¤±è´¥ï¼Œè¯·æ£€æŸ¥ PDB ç¼–å·æ˜¯å¦æ­£ç¡®ï¼");
                    loadingMessage.style.display = "none";
                });

                fetchProteinInfo(pdbId, proteinDetails);
            });

            // PDB file upload functionality
            document.getElementById('pdbFileInput').addEventListener('change', function (event) {
                var file = event.target.files[0];
                if (file) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        var pdbData = e.target.result;
                        viewer.clear();
                        loadingMessage.style.display = "block";
                        proteinDetails.innerHTML = "æ­£åœ¨è·å–è›‹ç™½è´¨ä¿¡æ¯...";

                        var model = viewer.addModel(pdbData, "pdb");
                        viewer.setStyle({}, { stick: {} });
                        viewer.zoomTo();
                        viewer.zoom(1.4);
                        viewer.render();
                        loadingMessage.style.display = "none";

                        // Extract PDB ID from filename (e.g., "1O86.pdb" -> "1O86")
                        var pdbId = file.name.replace(/\.pdb$/i, "").toUpperCase();
                        fetchProteinInfo(pdbId, proteinDetails);

                        // Add hover functionality
                        viewer.setHoverable({}, true, function (atom, viewer, event, container) {
                            if (atom && atom.resn) {
                                tooltip.innerHTML = `Residue: ${atom.resn} ${atom.resi}<br>Chain: ${atom.chain}`;
                                tooltip.style.left = `${event.clientX + 15}px`;
                                tooltip.style.top = `${event.clientY + 15}px`;
                                tooltip.style.display = "block";
                            }
                        }, function () {
                            tooltip.style.display = "none";
                        });
                    };
                    reader.readAsText(file);
                }
            });

            // Tooltip movement
            document.addEventListener("mousemove", function (event) {
                if (tooltip.style.display === "block") {
                    tooltip.style.left = `${event.clientX + 15}px`;
                    tooltip.style.top = `${event.clientY + 15}px`;
                }
            });
        });

        function fetchProteinInfo(pdbId, proteinDetails) {
            console.log('pdbId', pdbId);
            const apiUrl = `https://www.ebi.ac.uk/pdbe/api/pdb/entry/molecules/${pdbId.toLowerCase()}`;

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) throw new Error("APIè¯·æ±‚å¤±è´¥");
                    return response.json();
                })
                .then(data => {
                    console.log('APIè¿”å›æ•°æ®:', data);
                    const molecules = data[pdbId.toLowerCase()]; // è·å–å¯¹åº”PDB IDçš„åˆ†å­æ•°ç»„

                    // æ£€æŸ¥åˆ†å­æ•°æ®æ˜¯å¦å­˜åœ¨
                    if (!molecules || molecules.length === 0) {
                        proteinDetails.innerHTML = "æœªæ‰¾åˆ°è›‹ç™½è´¨ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥PDB IDï¼";
                        return;
                    }

                    // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªè›‹ç™½è´¨å®ä½“ï¼ˆpolypeptide(L)ç±»å‹ï¼‰
                    const molecule = molecules.find(mol => mol.molecule_type === 'polypeptide(L)');
                    if (!molecule) {
                        proteinDetails.innerHTML = "è¯¥ç»“æ„æœªåŒ…å«è›‹ç™½è´¨å®ä½“ï¼";
                        return;
                    }

                    // å¹¶è¡Œè·å–UniProt ID
                    const uniprotUrl = `https://www.ebi.ac.uk/pdbe/api/pdb/entry/uniprot/${pdbId.toLowerCase()}`;
                    return Promise.all([
                        molecule,
                        fetch(uniprotUrl)
                            .then(res => res.ok ? res.json() : null)
                            .catch(() => null)
                    ]);
                })
                .then(([molecule, uniprotData]) => {
                    // è§£æUniProt ID
                    let uniprotId = 'N/A';
                    if (uniprotData && uniprotData[pdbId.toLowerCase()]) {
                        const uniprotKeys = Object.keys(uniprotData[pdbId.toLowerCase()].UniProt || {});
                        if (uniprotKeys.length > 0) {
                            uniprotId = uniprotKeys[0].split('|')[0];
                        }
                    }

                    // å¤„ç†åµŒå¥—æ•°æ®ç»“æ„
                    const source = molecule.source?.[0] || {};
                    const mappings = source.mappings?.[0] || {};

                    // æ„å»ºHTMLä¿¡æ¯
                    const infoHtml = `
                    <div style="display: flex; flex-wrap: wrap; gap: 20px; font-family: Arial, sans-serif; color: #333;">
                        <!-- åŸºæœ¬ä¿¡æ¯ -->
                        <div class="protein-info-column" le="flex: 1 1 200px; min-width: 200px;">
                            <h3 style="color: #0066cc; margin-bottom: 10px;">ğŸ“Œ åŸºæœ¬ä¿¡æ¯</h3>
                            <p><strong>PDB ID:</strong> ${pdbId}</p>
                            <p><strong>UniProt ID:</strong> ${uniprotId}</p>
                            <p><strong>åˆ†å­ç±»å‹:</strong> ${molecule.molecule_type || 'N/A'}</p>
                            <p><strong>é“¾:</strong> ${molecule.in_chains?.join(', ') || 'N/A'}</p>
                        </div>

                        <!-- ç»“æ„å‚æ•° -->
                        <div class="protein-info-column" style="flex: 1 1 200px; min-width: 200px;">
                            <h3 style="color: #28a745; margin-bottom: 10px;">ğŸ“Š ç»“æ„å‚æ•°</h3>
                            <p><strong>æ®‹åŸºæ•°é‡:</strong> ${molecule.length || 'N/A'}</p>
                            <p><strong>åˆ†å­é‡:</strong> ${molecule.weight ? `${molecule.weight.toFixed(1)} kDa` : 'N/A'}</p>
                        </div>

                        <!-- è›‹ç™½è´¨ä¿¡æ¯ -->
                        <div class="protein-info-column" style="flex: 1 1 200px; min-width: 200px;">
                            <h3 style="color: #ff6347; margin-bottom: 10px;">ğŸ§¬ è›‹ç™½è´¨ä¿¡æ¯</h3>
                            <p><strong>åç§°:</strong> ${molecule.molecule_name?.join(', ') || 'N/A'}</p>
                            <p><strong>åŸºå› :</strong> ${molecule.gene_name?.join(', ') || 'N/A'}</p>
                        </div>

                        <!-- æ¥æºä¸åˆ¶å¤‡ -->
                        <div class="protein-info-column" style="flex: 1 1 200px; min-width: 200px;">
                            <h3 style="color: #ffc107; margin-bottom: 10px;">ğŸŒ± æ¥æºä¸åˆ¶å¤‡</h3>
                            <p><strong>ç‰©ç§:</strong> ${source.organism_scientific_name || 'N/A'}</p>
                            <p><strong>è¡¨è¾¾ç³»ç»Ÿ:</strong> ${source.expression_host_scientific_name || 'N/A'}</p>
                            <p><strong>åˆ¶å¤‡æ–¹å¼:</strong> ${molecule.sample_preparation || 'N/A'}</p>
                        </div>

                        <!-- åºåˆ—ä¿¡æ¯ -->
                        <div class="protein-info-column" style="flex: 1 1 200px; min-width: 200px;">
                            <h3 style="color: #17a2b8; margin-bottom: 10px;">ğŸ”„ åºåˆ—ä¿¡æ¯</h3>
                            <p><strong>åºåˆ—åŒºé—´:</strong> ${mappings.start?.residue_number || 'N/A'}-${mappings.end?.residue_number || 'N/A'}</p>
                            <p><strong>éƒ¨åˆ†åºåˆ—:</strong> ${molecule.pdb_sequence?.slice(0, 20) || 'N/A'}...</p>
                        </div>
                    </div>
                    `;

                    proteinDetails.innerHTML = infoHtml;
                })
                .catch(error => {
                    console.error('æ•°æ®è·å–å¤±è´¥:', error);
                    proteinDetails.innerHTML = "ä¿¡æ¯åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–PDB IDï¼";
                });
        }


    </script>

</body>

</html>